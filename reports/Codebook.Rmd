---
title: "Codebook | Corpus of Resolutions: UN Security Council"
author: "Se√°n Fobbe, Niccolo Ridi and Lorenzo Gasbarri"
geometry: margin=3cm
papersize: a4
fontsize: 11pt
output:
  pdf_document:
    toc: true
    toc_depth: 3
    number_sections: true
    pandoc_args: --listings
    includes:
      in_header: ../tex/Preamble_EN.tex
      before_body: [../temp/Definitions.tex, ../tex/Titlepage_Codebook.tex]
bibliography: ../temp/packages.bib
nocite: '@*'
---




```{r, setup, include=FALSE}
knitr::opts_chunk$set(fig.path = file.path("..", "analysis/"),
                      dev = config$fig$format,
                      dpi = config$fig$dpi,
                      fig.align = config$fig$align,
                      echo = FALSE,
                      warning = FALSE,
                      message = FALSE)

```


```{r, echo = FALSE}
tar_load(latexdefs)
tar_load(dt.var_codebook)
tar_load(var_lingstats)
tar_load(lingstats.summary)
tar_load(dt.final)
tar_load(igraph_citations)


```



# Introduction

The United Nations Security Council (UNSC) is the most influential of the principal UN organs. Composed of five permanent and 10 non-permanent members, its functioning is subject to the political context in which it operates. During the Cold War, the veto powers and the complex political relationships between the permanent members affected its capacity to address violations of international peace and security, with only 646 resolutions passed from 1946 to 1989. 

Since 1990s, the productiveness of the UN Security Council has increased dramatically and produced 2679 resolutions by early 2023. The length and complexity of the resolutions has also increased, with calls to define it a quasi-legislative body.

Under article 24 and 25 of the UN Charter, member states have conferred upon UNSC the \enquote{primary responsibility for the maintenance of international peace and security} and have agreed \enquote{to accept and carry out} its decisions. The discharge of this function is carried out through the powers bestowed upon it under Chapter VI of the UN Charter, \enquote{Pacific Settlement of Disputes}, Chapter VII, \enquote{Action with Respect to Threats to the Peace, Breaches of the Peace, and Acts of Aggression}, Chapter VIII, \enquote{Regional Arrangements}, and Chapter XII, \enquote{International Trusteeship System}. 

Under the peace and security mandate, its area of activities covers disarmament, pacific settlement of disputes, enforcement, and, until 1994, strategic areas in a trusteeship agreement. Its functions also pertain to the correct working of the United Nations, covering issues of membership, the appointment of the Segretary General, the elections of judges of the International Court of Justice (ICJ), the calling of special and emergency sessions of the General Assembly, the amendment of the Charter and of the ICJ Statute.

The Corpus of Resolution: UN Security Council (CR-UNSC) collects, for the first time, all resolutions, drafts, and meeting records of the UN Security Council, as published by the UN Digital Library.\footnote{\url{https://digitallibrary.un.org/?ln=en}.}






# Reading Files

The data are published in open, interoperable and widely used formats (CSV, TXT, PDF). They can be used with all modern programming languages (e.g. Python or R) and graphical interfaces. The PDF collections are intended to facilitate traditional legal research.

**Important:** Missing values are always coded as \enquote{NA}.


## CSV Files

 Working with the CSV files is recommended. CSV\footnote{The CSV format is defined in RFC 4180: <\url{https://tools.ietf.org/html/rfc4180}>.} is an open and simple machine-readable tabular data format. In this data set values are separated by commas. Each column is a variable and each row is a document. Variables are explained in detail in section \ref{variables}.


To read \textbf{CSV} files into R I strongly recommend using the fast file reader **fread()** from the **data.table** package (available on CRAN). The file can be read into \textbf{R} like so: 

```{r, eval = FALSE, echo = TRUE}
library(data.table)
unsc <- fread("CR-UNSC_2023-08-23_EN_CSV_Main-Dataset.csv")
```



## TXT Files

The \textbf{TXT} files, including metadata, can be read into \textbf{R} with the package \textbf{readtext} (available on CRAN) thus:

```{r, eval = FALSE, echo = TRUE}
library(readtext)
unsc <- readtext("txt_res_en/*.txt",
                 docvarsfrom = "filenames", 
                 docvarnames = c("body",
                                 "doctype",
                                 "res_no",
                                 "year",
                                 "language"),
                 dvsep = "_", 
                 encoding = "UTF-8")

```






# Data Set Design


## Overview of Data Set

The \textbf{\datatitle\ (\datashort)} collects and structures in human- and machine-readable form all published resolutions of the United Nations Security Council (UNSC) in all six official UN languages (Arabic, Chinese, English, French, Spanish and Russian). Specialized variants of the data set present citation data and bibliopgrahic database compatible with a wide range of end-user applications.



## Table of Sources


\begin{centering}
\begin{longtable}{P{5cm}p{9cm}}

\toprule
 Data Source & Citation \\

\midrule

 Primary Data Source & \url{https://digitallibrary.un.org/}\\
 Source Code & \url{\softwareversionurldoi}\\

\bottomrule

\end{longtable}
\end{centering}



## Motivation

Our motivation in creating this dataset is to enhance international legal and political research, increase understanding of the work of the \unsc\ and facilitate creative work on international peace and security. The \datashort\ is a general-purpose dataset that is intended to provide high-quality legal and political data allowing researchers, practitioners, civil society, UN officials, governments and any other interested parties to address a wide range research questions related to the \unsc . It is not limited to a particular line of inquiry or specific discipline. Specialized variants of the data set present citation data and bibliopgrahic database compatible with a wide range of end-user applications.


## Funding

The authors did not receive any funding to work on this dataset. All work on the dataset was carried out in addition to their regular academic activities. 



## Composition

The dataset is primarily composed of the texts of all resolutions in all official UN languages published by the \unsc . We aim for a complete accounting of all resolutions, up to the most recent resolution that was available through the UN Digital Library on the date of data set creation. We further provide the English texts of the draft resolutions and meeting record associated with each resolutons. Each resolutions is accompanied by as much high-quality metadata as could be acquired and validated from the UN Digital Library, as well as additional metadata extracted from the text of the resolutions. The exact size of the data set is documented and visualized with frequency tables at the end of this Codebook.

The data set is self-contained, but it contains the original URLs to UN Digital Library record pages and URLs to individual PDF files for purposes of reproducibility, data validation and creating digital applications that would benefit from integrating linked open data. We assume these URLs will remain stable over time, but their maintenance is up to the UN Digital Library. In case of link failure, newer version of the data set will contain updated links.

There are no recommended data splis. However, all resolutions are consecutively numbered and timestamped with the date of adoption. Time series analysis should take this into account.




## Sensitive Data

Resolutions of the \unsc\ are publicly available official documents of an international organization. The metadata strictly relates to these public documents. While the text of the resolutions contains references to individuals and organizations, this information has always been published in unredacted form by the \unsc . We have not redacted any of this information to ensure the integrity of these official documents. In any case, the maintenance of international peace and security at the highest international level is a public affair of such magnitude that privacy rights of individuals and organizations cannot prevent their mention and discussion of their activities in official texts of the \unsc .




##  Data Collection

Data were collected with the explicit consent of the Secretariat of the \unsc . All documents were downloaded via TLS-encrypted connections and cryptographically signed after data processing was complete. The data set collects all resolutions issued by the \unsc\ that were published on the UN Digital Library on \version .

  


```{r, CR-UNSC_00_Pipeline_Graph_blackwhite, fig.width = 12, fig.height = 14, fig.pos = "p", fig.cap = "The complete data set compilation process."}


edgelist <- tar_network(targets_only = TRUE)$edges
setDT(edgelist)

g  <- igraph::graph.data.frame(edgelist,
                               directed = TRUE)


ggraph(g,
       'sugiyama') + 
    geom_edge_diagonal(colour = "grey70")+
    geom_node_point(size = 2)+
    geom_node_text(aes(label = name),
                   size = 2,
                   repel = TRUE)+
    theme_void()+
    labs(
        title = paste(prefix.figuretitle,
                      "| Complete data set compilation process."),
        caption = caption
    )+
    theme(
        plot.title = element_text(size = 14,
                                  face = "bold"),
        plot.margin = margin(10, 20, 10, 10)
    )

```


## Processing and Quality Assurance


Dozens of automated tests were conducted to ensure the quality of the data and metadata. These include:

- Strict validation of variable types via \emph{regular expressions}.
- Creation of visualizations for many common descriptive analyses.

For results of each test and more information on the construction of the data set please refer to the Compilation Report or the Robustness Checks report.




## Distribution

The datast is cleared for immediate publication and is distributed free of charge. 

Versions of record for the data set and source code are distributed on the internet via Zenodo, a non-profit scientific repository managed by CERN. The concept of the data set is uniquely identified by a digital object identififer (DOI), which always resolves to the latest version. In addition to the \enquote{Concept DOI} each version of the data set is further uniquely identified with its own DOI, the \enquote{Version DOI}.

Development versions of the source code are available on GitHub but carry no promise of correctness or functionality.


## Maintenance and Updates

Authentic versions of the dataset and source are always hosted on Zenodo. Zenodo guarantees storage CERN's Data Centre and public availability for the lifetime of CERN, which has a defined research program for at least the next 20 years.

Maintenance and further development of the dataset and source code will be carried out by the author(s) for the foreseeable future. Contact details are available on the Zenodo page of the data set.

We intend to update the dataset at least once per year.





## Source Code and Compilation Report

The full Source Code for the creation of this data set, the resulting Compilation Report, a Robustness Checks report and this Codebook are published open access and permanently archived with Zenodo, the scientific repository of CERN.

With every compilation of the full data set an extensive **Compilation Report** is created in a professionally layouted PDF format. The Compilation Report includes the full data pipeline, comments and explanations of design decisions, relevant computational results, exact timestamps and a table of contents with clickable internal hyperlinks to each section. The Compilation Report is published under the same DOI as the Source Code.

For details of the construction and validation of the data set please refer to the Compilation Report and Robustness Checks report in addition to this Codebook.



## Limitations

Users should bear in mind certain important limitations:

- The data set contains only those documents which were published by the \unsc and have been made available by the UN Digital Library on its official website (\emph{publication bias}). This mainly affects languages other than English
- While Tesseract yields high-quality OCR results, current OCR technology is not perfect and minor errors must be expected (\emph{OCR bias}). This affects resolutions and associated drafts and meeting records up to resolution 899.
- The OCR texts for all languages other than English were *not* manually post-processed, so, in addition to OCR errors, may contain superfluous texts from other documents printed on the same page. This affects resolutions and associated drafts and meeting records up to resolution 899.



## Public Domain Status
 
According to written communication between the authors and the Secretariat of the \unsc\ the original documents are not subject to copyright.

To ensure the widest possible distribution and to promote the international rule of law we waive any copyright to the data set under a \textbf{Creative Commons CC0 1.0 Universal (CC0 1.0) Public Domain Dedication}. 

For details of the waiver please refer to the CC0 copyright notice at the beginning of this Codebook or visit the Creative Commons website for the full terms.\footnote{\url{https://creativecommons.org/publicdomain/zero/1.0/legalcode}}





# Variants and Target Audiences

The published data set contains all six official UN languages (English, French, Spanish, Arabic, Chinese and Russian) and is published in several different variants intended for specific target audiences. In particular, a CSV variant for general data analysis, a GraphML representation for citation analysis, a PDF variant for traditional research and a BIBTEX variant to assist with efficient citation of UNSC resolutions.



## ALL\_CSV_FULL

A structured representation of the full data set contained within a single comma-delimited file (CSV). Includes the full complement of metadata described in the Codebook. 

The *FULL* CSV variant includes the full text of the decisions, whereas the *META* CSV variant  only contains the metadata (i.e. all full-text variables are removed).


## ALL\_CSV_META

A structured representation of the metadata contained within a single comma-delimited file (CSV).

The *FULL* CSV variant includes the full text of the decisions, whereas the *META* CSV variant  only contains the metadata (i.e. all full-text variables are removed).



## ALL\_PDF\_RESOLUTIONS

A synthesis of all born-digital resolutions issued by the UNSC combined with older scanned documents which were given a new and enhanced text layer created with an advanced LSTM neural network machine learning engine. Enhancedd OCR documents are provided for resolutions 1 through 899.

Researchers with slow internet connections should consider using the *TXT* variant, as this still provides a reasonable visual approximation of the original documents, but offers the advantage of drastically reduced file size.


## ALL\_TXT



## EN\_BIBTEX_OSCOLA

A selection of variables from the metadata converted to `.bibtex` format compliant with the **bl-oscola** 1.7 standard. This should work with all standard reference managers such as Zotero, EndNote, Citavi and Jabref.





## EN\_GraphML\_Citations

## EN\_PDF\_Drafts


## EN\_PDF\_Meeting-Records




## ANALYSIS 

This archive contains almost all of the machine-readable analysis output generated during the data set creation process to facilitate further analysis (CSV for tables, PDF and PNG for plots). Minor analysis results are documented only in the Compilation Report.\\








# Variable Descriptions

## General Remarks

- Missing values are always coded as \enquote{NA}.
- All Strings are encoded in UTF-8.
- A significant part of the metadata has been drawn from the UN Digital Library metadata records and was originally curated by the UN Digital Library.


## ID Variables

The group ID variables identifies the resolution, its draft, meeting record and various associated documents with symbols and dates.


```{r}

kable(dt.var_codebook[group == "1_id", .(varname, type, description)],
      format = "latex",
      align = 'P{3.5cm}P{3cm}p{8cm}',
      booktabs = TRUE,
      longtable = TRUE,
      escape = FALSE,
      col.names = c("Variable",
                    "Type",
                    "Description"))  %>% kable_styling(latex_options = "repeat_header")

```

## Text Variables

Text variables contain the full text of all six language versions of the UN Security Council's resolutions. Also provided are pre-computed statistical measures of the length of each resolution (English text only).


```{r}

kable(dt.var_codebook[group == "2_text", .(varname, type, description)],
      format = "latex",
      align = 'P{3.5cm}P{3cm}p{8cm}',
      booktabs = TRUE,
      longtable = TRUE,
      escape = FALSE,
      col.names = c("Variable",
                    "Type",
                    "Description"))  %>% kable_styling(latex_options = "repeat_header")

```

## Thematic Variables

Thematic variables contain a number of different classifications of UN Security Council texts and will prove especially useful for refining the data to fit a thematic research question.


```{r}

kable(dt.var_codebook[group == "3_thematic", .(varname, type, description)],
      format = "latex",
      align = 'P{3.5cm}P{3cm}p{8cm}',
      booktabs = TRUE,
      longtable = TRUE,
      escape = FALSE,
      col.names = c("Variable",
                    "Type",
                    "Description"))  %>% kable_styling(latex_options = "repeat_header")

```

## Vote Variables

Voting variables document the voting results and patterns of UN Security Council's resolutions. Note that the voting variables contain the geographic distribution of votes.


```{r}

kable(dt.var_codebook[group == "4_vote", .(varname, type, description)],
      format = "latex",
      align = 'P{3.5cm}P{3cm}p{8cm}',
      booktabs = TRUE,
      longtable = TRUE,
      escape = FALSE,
      col.names = c("Variable",
                    "Type",
                    "Description"))  %>% kable_styling(latex_options = "repeat_header")

```

## Geographic Variables

Geographic variables provide insight into the geographic distribution of the UN Security Council's attention. Note that the voting variables contain the geographic distribution of votes.


```{r}

kable(dt.var_codebook[group == "5_geo", .(varname, type, description)],
      format = "latex",
      align = 'P{3.5cm}P{3cm}p{8cm}',
      booktabs = TRUE,
      longtable = TRUE,
      escape = FALSE,
      col.names = c("Variable",
                    "Type",
                    "Description"))  %>% kable_styling(latex_options = "repeat_header")

```

## Source Variables

Source variables provide explicit references for the data sources via URLs to UN Digital Library record pages and documents.



```{r}

kable(dt.var_codebook[group == "6_url", .(varname, type, description)],
      format = "latex",
      align = 'P{3.5cm}P{3cm}p{8cm}',
      booktabs = TRUE,
      longtable = TRUE,
      escape = FALSE,
      col.names = c("Variable",
                    "Type",
                    "Description"))  %>% kable_styling(latex_options = "repeat_header")

```


## Meta Variables

Meta variables provide further information on the data set, including version, DOIs and licensing information. These document provenance and ensure compliance with FAIR Data Principles F1, F3 and R1.1.



```{r}

kable(dt.var_codebook[group == "7_misc", .(varname, type, description)],
      format = "latex",
      align = 'P{3.5cm}P{3cm}p{8cm}',
      booktabs = TRUE,
      longtable = TRUE,
      escape = FALSE,
      col.names = c("Variable",
                    "Type",
                    "Description"))  %>% kable_styling(latex_options = "repeat_header")

```




# Biliographic Database

bl-oscola 1.7


# Citation Network Data





```{r}

g <- igraph_citations


dt.g <- data.table(Metric = c("Number of Nodes",
                              "Number of Edges",
                              "Mean Degree",
                              "Max Degree",
                              "Min Degree",
                              "Mean In-Degree",
                              "Max In-Degree",
                              "Min In-Degree",
                              "Diameter",
                              "Radius",
                              "Graph Density",
                              "Assortativity (Degree)",
                              "Motifs",
                              "Mean Distance"),
                   Value = c(vcount(g),
                                   ecount(g),
                                   mean(degree(g, mode = "all")),
                                   max(degree(g, mode = "all")),
                                   min(degree(g, mode = "all")),
                                   mean(degree(g, mode = "in")),
                                   max(degree(g, mode = "in")),
                                   min(degree(g, mode = "in")),
                                   diameter(g),
                                   radius(g),
                                   edge_density(g, loops = FALSE),
                                   assortativity_degree(g),              
                                   count_motifs(g),
                                   mean_distance(g)
                                   )
                   )


kable(dt.g,
      digits = 4,
      format.args = list(big.mark = ","),
      format = "latex",
      booktabs = TRUE,
      longtable = TRUE)


```


## Degree Distributions


```{r, CR-UNSC_31_Citations_Degree, fig.width = 9, fig.height = 6, fig.cap = "Degree distribution of the UNSC citation network."}


g <- igraph_citations
degree.all <- data.table(prop = degree_distribution(g, mode = "all"))
degree.all$degree <- 1:length(degree.all$prop)



ggplot(data = degree.all) +
    geom_bar(aes(x = degree,
                 y = prop),
             stat = "identity",
             fill = "black",
             color = "black",
             width = 0.5) +
    theme_bw() +
    labs(
        title = paste(prefix.figuretitle,
                      "| Degree Distribution of Citations"),
        caption = caption,
        x = "Degree",
        y = "Proportion"
    )+
    theme(
        text = element_text(size = 14),
        plot.title = element_text(size = 14,
                                  face = "bold"),
        legend.position = "none",
        plot.margin = margin(10, 20, 10, 10)
    )





```




```{r, CR-UNSC_32_Citations_In-Degree, fig.width = 9, fig.height = 6, fig.cap = "In-Degree distribution of the UNSC citation network."}


g <- igraph_citations
degree.in <- data.table(prop = degree_distribution(g, mode = "in"))
degree.in$degree <- 1:length(degree.in$prop)



ggplot(data = degree.in) +
    geom_bar(aes(x = degree,
                 y = prop),
             stat = "identity",
             fill = "black",
             color = "black",
             width = 0.5) +
    theme_bw() +
    labs(
        title = paste(prefix.figuretitle,
                      "| In-Degree Distribution of Citations"),
        caption = caption,
        x = "Degree",
        y = "Proportion"
    )+
    theme(
        text = element_text(size = 14),
        plot.title = element_text(size = 14,
                                  face = "bold"),
        legend.position = "none",
        plot.margin = margin(10, 20, 10, 10)
    )







```







## Citation Network Diagram



```{r, CR-UNSC_30_Citations_blackwhite, fig.width = 20, fig.height = 20, fig.pos = "p", dev = "png", fig.cap = "The citation network of the UNSC"}



g <- igraph_citations
ggraph(g, "stress", niter = 4000, bbox = 25) + 
    geom_edge_diagonal(colour = "black", edge_width = 0.1)+
    geom_node_point(size = 0.1,
                    color = "black")+
    theme_void()+
    labs(
        title = paste(prefix.figuretitle,
                      "| The complete UNSC citation network"),
        caption = caption
    )+
    theme(
        plot.title = element_text(size = 14,
                                  face = "bold",
                                  color = "black"),                        
        plot.background = element_rect(fill = "white"),
        plot.caption = element_text(color = "black"),
        plot.margin = margin(10, 20, 10, 10)
    )
    


```





# Linguistic Metrics


## Explanation of Metrics

We provide a number of classic linguistic metrics and visualize their distributions to better communicate the scope of the corpus and its constituent documents:


\medskip

\begin{centering}
\begin{longtable}{P{3.5cm}p{10.5cm}}

\toprule

Metric & Definition\\

\midrule

Characters & Characters roughly correspond to graphemes, the smallest functional unit in a writing system. The word \enquote{judge} is composed of 5 characters, for example.\\
Tokens & An arbitrary character sequence delimited by whitespace on both sides, e.g. it roughly corresponds to the notion of a \enquote{word}. However, due to its strictly syntactical definition it might also include arbitrary sequences of numbers or special characters.\\
Types & Unique tokens. If, for example, the token \enquote{human} appeared one hundred times in a given document, it would be counted as only one type. \\
Sentences & Corresponds approximately to the colloquial definition of a sentence. The exact rules for determining sentence boundaries are very complex and may be reviewed in \enquote{Unicode Standard: Annex No 29}.\\

\bottomrule

\end{longtable}
\end{centering}





## Summary Statistics



```{r}



kable(lingstats.summary,
      digits = 2,
      format.args = list(big.mark = ","),
      format = "latex",
      booktabs = TRUE,
      longtable = TRUE)


```



## Distributions of Document Length

The diagrams in this section are combined violin and box plots. They are especially useful in visualizing distributions of quantitative variables. Their interpretation is fairly straightforward: the greater the area under the curve for a given range, the more frequent the values are in this range. The thick center line of the box indicates the median, the outer lines of the box the first and third quartiles. Whiskers extend outwards to 1.5 times the inter-quartile range (IQR). Outliers beyond 1.5 times IQR are shown as individual points.

Please note that the x-axis is logarithmically scaled, i.e. in powers of 10. It therefore increases in a non-linear fashion. Additional sub-markings are included to assist with interpretation.



```{r, CR-UNSC_EN_10_Distributions_LinguisticMetrics, fig.height = 10, fig.width = 8.3}
## When plotting a boxplot on a logarithmic scale the standard geom_boxplot() function from ggplot2 incorrectly performs the statistical transformation first before calculating the boxplot statistics. While median and quartiles are based on ordinal position the inter-quartile range differs depending on when statistical transformation is performed.

## Solutions are based on this SO question: https://stackoverflow.com/questions/38753628/ggplot-boxplot-length-of-whiskers-with-logarithmic-axis


dt.allmetrics.en <- melt(var_lingstats,
                         measure.vars = rev(c("nchars",
                                              "ntokens",
                                              "ntypes",
                                              "nsentences")))

ggplot(dt.allmetrics.en, aes(x = value,
                             y = variable))+
    geom_violin()+
    stat_summary(fun.data = f.boxplot.body,
                 geom = "errorbar",
                 width = 0.1) +
    stat_summary(fun.data = f.boxplot.body,
                 geom = "boxplot",
                 width = 0.1) +
    stat_summary(fun.data = f.boxplot.outliers,
                 geom = "point",
                 size =  0.5,
                 alpha = 0.1)+
    scale_x_log10(breaks = trans_breaks("log10", function(x) 10^x),
                  labels = trans_format("log10", math_format(10^.x)))+
    annotation_logticks(sides = "b")+
    coord_cartesian(xlim = c(1, 10^6))+
    scale_y_discrete(labels = rev(c("Characters",
                                    "Tokens",
                                    "Types",
                                    "Sentences")))+
    theme_bw() +
    labs(
        title = paste(prefix.figuretitle,
                      "| Distributions of Document Length (EN)"),
        caption = caption,
        x = "Value",
        y = "Linguistic Metric"
    )+
    theme(
        text = element_text(size = 14),
        plot.title = element_text(size = 14,
                                  face = "bold"),
        legend.position = "none",
        plot.margin = margin(10, 20, 10, 10)
    )

        

```


# Voting

```{r, CR-UNSC_EN_03_Distributions_Voting, fig.height = 10, fig.width = 10}

## When plotting a boxplot on a logarithmic scale the standard geom_boxplot() function from ggplot2 incorrectly performs the statistical transformation first before calculating the boxplot statistics. While median and quartiles are based on ordinal position the inter-quartile range differs depending on when statistical transformation is performed.

## Solutions are based on this SO question: https://stackoverflow.com/questions/38753628/ggplot-boxplot-length-of-whiskers-with-logarithmic-axis


## Normalize by Total

dt.vote <- dt.final[,.(vote_yes, vote_no, vote_abstention, vote_nonvote, vote_total)]
dt.vote <- dt.vote / dt.vote$vote_total
dt.vote$vote_total <- NULL


names <- names(dt.vote)

dt.allmetrics <- melt(dt.vote,
                      measure.vars = rev(names))

ggplot(dt.allmetrics) +
    geom_bar(aes(x = value),
             fill = "black",
             color = "black",
             width = 0.01)+
    facet_wrap(~variable)+
    theme_bw() +
    labs(
        title = paste(prefix.figuretitle,
                      "| Voting Data"),
        caption = caption,
        x = "Proportion of Votes Cast",
        y = "Resolutions"
    )+
    theme(
        text = element_text(size = 14),
        plot.title = element_text(size = 14,
                                  face = "bold"),
        legend.position = "none",
        plot.margin = margin(10, 20, 10, 10)
    )



```



# Metadata Frequency Tables
 
\ra{1.3}
 

## Resolutions By Year


```{r, CR-UNSC_05_Barplot_Resolutions-by-Year, fig.height = 6, fig.width = 9}
freqtable <- f.fast.freqtable(dt.final,
                                 varlist = "year",
                                 sumrow = TRUE,
                                 output.list = TRUE,
                                 output.kable = FALSE,
                                 output.csv = FALSE,
                                 align = c("p{5cm}"))[[1]]

freqtable.nosum <- freqtable[-.N][,lapply(.SD, as.numeric)]





ggplot(data = freqtable.nosum) +
    geom_bar(aes(x = year,
                 y = N),
             stat = "identity",
             fill = "black",
             color = "black",
             width = 0.5) +
    theme_bw() +
    labs(
        title = paste(prefix.figuretitle,
                      "| Resolutions by Year"),
        caption = caption,
        x = "Year of Adoption",
        y = "Resolutions"
    )+
    theme(
        text = element_text(size = 14),
        plot.title = element_text(size = 14,
                                  face = "bold"),
        legend.position = "none",
        plot.margin = margin(10, 20, 10, 10)
    )

```


\vspace{0.5cm}


```{r}

kable(freqtable,
      format = "latex",
      align = 'P{3cm}',
      booktabs = TRUE,
      longtable = TRUE,
      col.names = c("Year",
                    "Resolutions",
                    "% Total",
                    "% Cumulative"))  %>% kable_styling(latex_options = "repeat_header")

```




## Resolutions by Country Mentioned


```{r, CR-UNSC_05_Barplot_Resolutions-by-Country, fig.height = 14, fig.width = 10}
split <- unlist(stringi::stri_split(dt.final$iso_name, regex = "\\|"))
country <- split[split != ""]


freqtable <- f.fast.freqtable(data.table(country),
                              sumrow = TRUE,
                              output.list = TRUE,
                              output.kable = FALSE,
                              output.csv = FALSE,
                              align = c("p{5cm}"))[[1]]



freqtable.nosum <- freqtable[-.N][order(-N)][1:50]





ggplot(data = freqtable.nosum) +
    geom_bar(aes(x = reorder(country,
                             N),
                 y = N),
             stat = "identity",
             fill = "black",
             color = "black",
             width = 0.5) +
    coord_flip()+
    theme_bw() +
    labs(
        title = paste(prefix.figuretitle,
                      "| Top 50 Countries mentioned"),
        caption = caption,
        x = "Country",
        y = "Resolutions"
    )+
    theme(
        text = element_text(size = 14),
        plot.title = element_text(size = 14,
                                  face = "bold"),
        legend.position = "none",
        plot.margin = margin(10, 20, 10, 10)
    )

```



\vspace{0.5cm}


```{r}

kable(freqtable,
      format = "latex",
      align = 'P{3cm}',
      booktabs = TRUE,
      longtable = TRUE,
      col.names = c("Country",
                    "Resolutions",
                    "% Total",
                    "% Cumulative"))  %>% kable_styling(latex_options = "repeat_header")

```




## Resolutions By Subject



```{r, CR-UNSC_05_Barplot_Resolutions-by-Subject, fig.height = 14, fig.width = 10}
split <- unlist(stringi::stri_split(dt.final$subjects, regex = "\\|"))
subjects <- split[split != ""]


freqtable <- f.fast.freqtable(data.table(subjects),
                              sumrow = TRUE,
                              output.list = TRUE,
                              output.kable = FALSE,
                              output.csv = FALSE,
                              align = c("p{5cm}"))[[1]]

freqtable$subjects <- tools::toTitleCase(tolower(freqtable$subjects))

freqtable$subjects <- gsub("Un", "UN", freqtable$subjects)
freqtable$subjects <- gsub("Vii", "VII", freqtable$subjects)

freqtable.nosum <- freqtable[-.N][order(-N)][1:50]





ggplot(data = freqtable.nosum) +
    geom_bar(aes(x = reorder(subjects,
                             N),
                 y = N),
             stat = "identity",
             fill = "black",
             color = "black",
             width = 0.5) +
    coord_flip()+
    theme_bw() +
    labs(
        title = paste(prefix.figuretitle,
                      "| 50 Most Frequent Subjects"),
        caption = caption,
        x = "Subject",
        y = "Resolutions"
    )+
    theme(
        text = element_text(size = 14),
        plot.title = element_text(size = 14,
                                  face = "bold"),
        legend.position = "none",
        plot.margin = margin(10, 20, 10, 10)
    )

```


```{r}

kable(freqtable.nosum,
      format = "latex",
      align = 'P{3cm}',
      booktabs = TRUE,
      longtable = TRUE,
      col.names = c("Subject",
                    "Resolutions",
                    "% Total",
                    "% Cumulative"))  %>% kable_styling(latex_options = "repeat_header")

```



# FAIR Data Conformity Declaration

The FAIR Principles lay out a leading global set of guiding standards for the management of scientific data. Four principles make up the FAIR standard: [F]indable, [A]ccessible [I]nteroperable and [R]eusable. It is the intention of the author(s) to be fully compliant with the FAIR standard. This conformity declaration is intended to provide further information on what measures have been taken to achieve this compliance.

For the original publication proposing the FAIR standard, see:

Wilkinson, M. D. et al. The FAIR Guiding Principles for scientific data management and stewardship. Sci. Data 3:160018 doi: 10.1038/sdata.2016.18 (2016).


## Findable

### [F1] (Meta)data are assigned a globally unique and persistent identifier

- The dataset and source code are published with Zenodo, a major scientific repository operated by CERN.
- Zenodo issues a DOI for the dataset as a whole and a DOI for each individual version of the dataset and source code.

### [F2] Data are described with rich metadata (defined by R1 below)

- Zenodo's metadata is compliant with DataCite's Metadata Schema minimum and recommended terms
- The author(s) have provided significant metadata to augment the Zenodo record, such as a lengthy description, keywords, publication details, license, related works and contact details for the maintainer(s)

### [F3] Metadata clearly and explicitly include the identifier of the data they describe

- With Zenodo the DOI is a top-level and a mandatory field in the metadata of each record

### [F4] (Meta)data are registered or indexed in a searchable resource

- Metadata is indexed in and searchable via Zenodo
- Metadata is indexed in and searchable via DataCite



## Accessible

### [A1] (Meta)data are retrievable by their identifier using a standardised communications protocol

- Zenodo provides a public OAI-PMH interface to retrieve metadata of individual records and whole collections
- Zenodo provides a public REST API to retrieve metadata of individual records

### [A1.1] The protocol is open, free, and universally implementable

- OAI-PMH and REST are open, free and universally implementable protocols 

### [A1.2] The protocol allows for an authentication and authorisation procedure, where necessary

- Zenodo provides all metadata publicly and without authentication under a public domain license

### [A2] Metadata are accessible, even when the data are no longer available

- Zenodo guarantees that metadata remain available for the lifetime of the parent organization CERN, which has a defined experimental program for the next 20 years
- Metadata are stored in different servers than the data at Zenodo
- Zenodo commits to providing a "data tombstone" of the record that contains all metadata even if data becomes unavailable for legal or other reasons




## Interoperable

### [I1] (Meta)data use a formal, accessible, shared, and broadly applicable language for knowledge representation.

- Zenodo metadata is internally stored as JSON and can be exported to MARCXML, Dublin Core XML, CSL, DataCite JSON, DataCite XML, BibTeX, GeoJSON and DCAT

### [I2] (Meta)data use vocabularies that follow FAIR principles

- Zenodo refers to external vocabularies for license (Open Definition), funders (FundRef) and grants (OpenAIRE)

### [I3] (Meta)data include qualified references to other (meta)data

- The CR-UNSC embeds the Concept DOI and Version DOI for the relevant Zenodo record in the CSV dataset and the Codebook
- The CR-UNSC includes the unique URL for the resolution text in all six UN languages, the URL for the draft and meeting record in English and the URL for the UN Digital Library record pages of the resolution, draft and meeting record. UN Digital Library record pages provide machine-readable metadata in a wide range of export formats




## Reusable

### [R1] (Meta)data are richly described with a plurality of accurate and relevant attributes


### [R1.1] (Meta)data are released with a clear and accessible data usage license

- Zenodo metadata includes standardized representations of each license compliant with the OpenDefinition standard

- The CR-UNSC data is published under a standardized Creative Commons CC0 1.0 waiver
- The CR-UNSC source code is published under a standardized MIT-0 license
- The CR-UNSC embeds the  data license in the CSV file and in the Codebook

### [R1.2] (Meta)data are associated with detailed provenance

- The CR-UNSC embeds the Concept DOI and Version DOI for the relevant Zenodo record in the CSV dataset and the Codebook
- The CR-UNSC includes the unique URL for the resolution text in all six UN languages, the URL for the draft and meeting record in English and the URL for the UN Digital Library record pages of the resolution, draft and meeting record


### [R1.3] (Meta)data meet domain-relevant community standards

- The CR-UNSC was crafted by specialized international lawyers, complies with international law terminology and respects international legal usage wherever possible
- The CR-UNSC respects United Nations terminology and United Nations document symbols
- The CR-UNSC adapts all metadata conventions from the UN Digital Library
- The CR-UNSC complies with ISO and UN M49 standards for country and area codes



\newpage
# Cryptographic Signatures


## Two Phase Signature


The integrity and veracity of the ZIP archives and other output of the data set are guaranteed with two-phase *hash-and-sign* signature process.

In **Phase I** the data pipeline automatically computes digital fingerprints (hashes) with two different secure algorithms (SHA2-256 und SHA3-512) and stores these in a CSV file.

In **Phase II** the CSV files with hashes is manually signed with a secret GPG key.

This process ensures that the compilation of the data set can be performed by anyone, such as in scientific replication studies, but provides the same guarantees as signing the full data set would. 



## Personal GPG Key

The CSV file is signed with the personal GPG key of the first author. The public key is included with the data set and source code publication on Zenodo, as well as the project GitHub repository. The key is identified as follows:
 
 **Name:** Sean Fobbe (fobbe-data@posteo.de)
 
 **Fingerprint:** FE6F B888 F0E5 656C 1D25  3B9A 50C4 1384 F44A 4E42





\newpage






```{r, results = "asis"}
cat(readLines(tar_read(changelog)),
    sep = "\n")

```






# Replication Parameters


```{r}
system2("openssl", "version", stdout = TRUE)

sessionInfo()

```


# Bibliography
